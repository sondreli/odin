#!/usr/bin/env python3.8

import requests, json

access_token = "eyJjdHkiOiJKV1QiLCJlbmMiOiJBMjU2R0NNIiwiYWxnIjoiUlNBLU9BRVAtMjU2IiwiaXNzdWVkQnkiOiJhcGktdG9rZW4taXNzdWVyIiwia2lkIjoiN2NkYWM1MTctMWJjMi00M2ZhLWE1ODQtNjAwN2YyM2M3ZDAyIn0.CuiAtlw5zHmL5kwLHN61Mz6FY4qnfOZowW99F5-kLDR7R63XyhKBn_qVEcJ7j5jyKfH8N1fiOhj4hb6Vxk7GZAH7O81DQz3AXKsZcbt7q-2gny-o8Y1YB_FUbd0ar39QYu5ca0jgI54-WNesOc12a1ihtQ9d4HL3QK_uooM-KZy7FnlIrdp8PL5mHXT6oTvWLBBsjAYoAmFGg2d6YEmoHL1Nk5YcGp525Cg5LJiei9L-RUK5jrW7obsgBIG0nZEihkRk4aZ3fx2YXwMG7nNaykg4vOSVsyZ0bqVwVceJl1eEdVBBrd371zUcRlyPUFJ8-68E1ApZBh9ZkCmIZBkSHw.jGRwwyLB6DPr8qvZ.iruZzHqNaYejNrlqJ_8GPU9D8_q1xkHPs99lIvP1304UEdzp94hK_oZX4vVYjrYrZ7W0kgd3WwHHeiCiWpQZtDX2QCHTfiVst_c2kMK56jx696xgqsUBPuZjd3pB07n-8AzwonzP3IcGikYqWs9g6D2fzwsDI3LkqU_GuVRgWNA_bsJTmna8Uu_94g1d5Hx2zqgtitDARgW1ahqyQlm8YMiNOv9Z736BU1hcgCbWkDwocpAswXl6kVcDwYpKGKdb172j4BBEFzaKPIkN4kGv9T-Qcy83v5wOLnDCJJgLakPuF0CqpMMkCqod-daWkY9Tf7vxzGnRg0xJ0xWkJ42ojfIw-Fv06tn-aYpPWMMUoktmITyrN7CmbsXfjWdNwVt8z6Ed18ggIAArbeJuEWynveGZkE-Iqy8-Gu-kwpu_m4xy6OsSmpt9u16-__slweo04E1_R0gkfHy5iHjnC_KDtNMuqLD5QAjfqTzRy7bYBTTygcvXWCyOEJsR1TCLRZQWgBz-o-s3rpAQ9CTz9CtjE_oS01CbWjjVBOSVE-kr2BKklJzfLZ3I2Ug02w8bfhlEJbkoh_IWJ36sCBjfT3Cx0WLUY0mVLmqcrrV_07J9ZZwzFMQCb3H98KvE3UJjQpgn_amTrSDBjqMfapA9LXnL-Ps9SWgS88W6g4GuNtu3rq0iNkVNEYLVVPNbnL-YVVSwEtvZroxdB4l_Ke6vSD5mOnDDIcN3aEzN_m1ZE6Vlc_4Vw38Imz6zaueaxHOT_sJaWgwcTVZa2l_CGC7w4N2VXU5MuWe29W2zlbtSy_1aPnXHXfjBbfv13QLkfyePr10e-MUduo3GU78MFooDfTJE2WKvgl9kgayBnckwIE74rIPJXc9Glgc_8udxPcxNUHBBglpNOh3cxi9-TGpkDsbvqB2N18HlCu8bN2FCE0kqJiYwf00ceqvK8IdHBdmS3dFjFkJjwfGT2EfZ8YFtFXZwYW0Ms7X_Hmbdc_VKhl7jzoOVbVO5FBzCOfyTyMP_ggDUPRWws7BxZmtFNTs0T-wYl033aICqf9J7s06Ol8K-4X7o-FUbn35RwgxTvdDNF55jmZ0P1QJzqFk2tfN_Mc_iq2hWKhzLscQPYrJ3k1EwAXtwgWZHNo_8K6fgStT34FDxnaBj-F5Lu_mLn_dxwI06YGGMxig_n1l5guawKMHR5l8Vi0yuMfX_ohZFHajOYDf5O4ksZB7aHdX8CKcJ6wuAdtrSnpZtTKEmcICkQC1OoixBn8dHdsEq9IgdjvJ_eRuY9sGvVQ9SPbTVbGiYrHWFxla_y3TuDgJ48TdKEtlTZLxZdxtBhXKu2KePQIK5OMTumUDEQyQphPvLxnyCLgVdeMgDlB3HR9uNLAN2kF7m1NDEqIalp-S87qUOQmy3Mi-fGvw-bA5Gj-FEO06mCfwOdimQvhamZpGHZg9DVinseLeRYHkzPR2NIKwaHTQgvs_r8zBvtkrzCtHP0RHxH7frFhVv9N8zrSrXKM2_fe0yIlY30Y5Zd1UVhV6-3NRfFhFsffHqmHoQfHZ1wNOlx51YwtWNhQaVnCqvu2YEmK-1OcV3qyiCH4Yr7BbMtk-06iuIksNyzorQ7SM3RMYX.3yc1TOEv82EkpCVTnBGhYw"

api_call_headers = {'Authorization': 'Bearer ' + access_token}
api_call_response = requests.get('https://api.sparebank1.no/personal/banking/accounts/default', headers=api_call_headers, verify=False)

print("post call")

if( api_call_response.text == 'Unauthorized'):
    print("Not authorized")
    access_token = ''
else: 
    print("Got some loads")
    response = json.loads(api_call_response.text)
    print(response)
    content = 'Acount owner: ' + response['owner']['name']
